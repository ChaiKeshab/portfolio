---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
    const projects = await getCollection("projects");
    const otherProjects = await getCollection("otherProjects");

    const allProjects = [...projects, ...otherProjects];
    return allProjects.map((project) => ({
        params: { project: project.id },
        props: { project },
    }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout title={`Chai Keshab - ${project.data.title}`}>
    <div class="min-h-screen container mx-auto px-2 md:px-12 lg:px-4 py-20">
        <article
            class="max-w-4xl mx-auto w-full prose prose-lg dark:prose-invert"
        >
            <header class="mb-8">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 text-primary">
                    {project.data.title}
                </h1>

                <div class="flex flex-wrap gap-2 mb-6">
                    {
                        project.data.tags.map((tag) => (
                            <span class="border-border bg-surface text-primary text-sm font-semibold px-3 py-1 rounded-md border">
                                {tag}
                            </span>
                        ))
                    }
                </div>
            </header>

            <section
                class="mt-16 content prose prose-indigo dark:prose-invert max-w-none"
            >
                <Content />
            </section>
        </article>
    </div>
</BaseLayout>
