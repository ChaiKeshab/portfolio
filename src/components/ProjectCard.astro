---
import { Icon } from "astro-icon/components";

interface Props {
    id: string;
    title: string;
    desc: string;
    tags: string[];
    links?: {
        github?: string;
        live?: string;
    };
}

const { id, title, desc, tags, links } = Astro.props;
---

<a href={`/projects/${id}`} class="group w-full h-full">
    <div
        class="w-full h-full flex flex-col gap-3 justify-start items-stretch p-6 bg-surface/60 border border-border rounded-lg hover:shadow-lg hover:shadow-primary/10 transition-all duration-200 hover:-translate-y-1"
    >
        <div class="flex items-start justify-between">
            <div class="flex items-center gap-3">
                <div class="text-primary">
                    <Icon size={48} name="folder" />
                </div>
            </div>

            {
                links && (
                    <div class="flex gap-3 opacity-70 group-hover:opacity-100 transition-opacity duration-300">
                        {links.github && (
                            <button
                                onclick={`window.open('${links.github}', '_blank'); event.stopPropagation();`}
                                class="cursor-pointer text-muted hover:text-primary transition-colors duration-200"
                                aria-label={`${title} GitHub repository`}
                            >
                                <Icon size={24} name="github" />
                            </button>
                        )}

                        {links.live && (
                            <button
                                onclick={`window.open('/projects/${id}', '_blank'); event.stopPropagation();`}
                                class="cursor-pointer text-muted hover:text-primary transition-colors duration-200"
                                aria-label={`Visit ${title} live site`}
                            >
                                <Icon size={24} name="popout" />
                            </button>
                        )}
                    </div>
                )
            }
        </div>

        <div class="flex-1 flex flex-col gap-4 justify-start items-stretch">
            <h3
                class="text-xl font-bold text-text group-hover:text-primary transition-colors duration-300"
            >
                {title}
            </h3>

            <p class="text-muted text-sm leading-relaxed">
                {desc}
            </p>

            <div class="mt-auto flex flex-wrap gap-x-3 gap-y-1 pt-2">
                {
                    tags.map((tag) => (
                        <span class="px-1 text-xs font-mono rounded-full text-subtle hover:text-primary hover:border-primary/30 transition-all duration-200">
                            {tag}
                        </span>
                    ))
                }
            </div>
        </div>
    </div>
</a>
